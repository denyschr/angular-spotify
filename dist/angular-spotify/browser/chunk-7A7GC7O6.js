import{a as m}from"./chunk-LMI3TD7F.js";import{e as y,f as j}from"./chunk-4KC2LGDH.js";import{$ as d,D as l,E as c,R as r,Xa as _,Za as k,_ as h,ab as a,fa as g,na as v,y as n}from"./chunk-J6CKLZZ5.js";var S=(()=>{let t=class t{constructor(o,i,s,f){this._router=o,this._route=i,this._authService=s,this._jwtService=f,this._route.queryParams.pipe(m()).subscribe(T=>{let p=T.code;p&&this._authService.generateToken(p).pipe(m()).subscribe(u=>{this._jwtService.saveAccessToken(u.access_token),this._jwtService.saveRefreshToken(u.refresh_token),this.verify()})})}verify(){this._jwtService.getAccessToken()&&this._router.navigate(["."])}onLogin(){window.location.href=this._authService.getAuthUrl()}};t.\u0275fac=function(i){return new(i||t)(r(k),r(_),r(j),r(y))},t.\u0275cmp=l({type:t,selectors:[["as-login"]],decls:4,vars:0,consts:[[1,"login","relative"],[1,"login__block","inset-center","text-center"],[1,"login__button","button","button--primary",3,"click"]],template:function(i,s){i&1&&(h(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return s.onLogin()}),v(3,"Login"),d()()())},styles:[".login[_ngcontent-%COMP%]{height:100%}.login__block[_ngcontent-%COMP%]{padding:2rem}"],changeDetection:0});let e=t;return e})();var x=[{path:"",component:S}],w=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c({type:t}),t.\u0275inj=n({imports:[a.forChild(x),a]});let e=t;return e})();var M=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c({type:t}),t.\u0275inj=n({imports:[w]});let e=t;return e})();export{M as LoginModule};
